<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Mantenimiento de copias de la información en múltiples computadores
  Es un recurso utilizado ampliamente en sistemas distribuidos
  Servidores web: servidores caché y proxies"><title>🟣 Replicacion</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://h0oe.github.io/sistemas-distribuidos//icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><link href=https://h0oe.github.io/sistemas-distribuidos/styles.8010c0d8fb32a34f00886b05df3d230c.min.css rel=stylesheet><script src=https://h0oe.github.io/sistemas-distribuidos/js/darkmode.46b07878b7f5d9e26ad7a3c40f8a0605.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://h0oe.github.io/sistemas-distribuidos/js/popover.688c5dcb89a57776d7f1cbeaf6f7c44b.min.js></script>
<script>const BASE_URL="https://h0oe.github.io/sistemas-distribuidos/",fetchData=Promise.all([fetch("https://h0oe.github.io/sistemas-distribuidos/indices/linkIndex.0a3100ea17941fa3eb485aeec6b0da05.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://h0oe.github.io/sistemas-distribuidos/indices/contentIndex.9f8b06a8842638572c699936f50ba209.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL("https://h0oe.github.io/sistemas-distribuidos/"),s=n.pathname,o=window.location.pathname,i=s==o,e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!1;drawGraph("https://h0oe.github.io/sistemas-distribuidos",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2}),initPopover("https://h0oe.github.io/sistemas-distribuidos",!0,!0)},init=(e=document)=>{renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/h0oe.github.io\/sistemas-distribuidos\/js\/router.557a499829be51f9008c6efa5b73602a.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://h0oe.github.io/sistemas-distribuidos/js/search.cf33b507388f3dfd5513a2afcda7af41.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://h0oe.github.io/sistemas-distribuidos/>🪴 Sistemas Distribuidos</a></h1><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>🟣 Replicacion</h1><p class=meta>Last updated June 29, 2022</p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#transparencia>Transparencia</a></li><li><a href=#consistencia>Consistencia</a></li><li><a href=#objeto>Objeto</a></li><li><a href=#objeto-lógico>Objeto lógico</a></li><li><a href=#gestor-de-réplicas>Gestor de réplicas</a></li><li><a href=#frontal>Frontal</a></li><li><a href=#petición>Petición</a></li><li><a href=#tolerancia-a-fallos>Tolerancia a fallos</a><ol><li><a href=#replicación-pasiva>Replicación pasiva</a></li><li><a href=#replicación-activa>Replicación Activa</a></li></ol></li><li><a href=#alta-disponibilidad>Alta disponibilidad</a><ol><li><a href=#convergencia>Convergencia</a></li><li><a href=#consistencia-1>Consistencia</a></li></ol></li><li><a href=#consenso-por-quorum>Consenso por Quorum</a><ol><li></li></ol></li><li><a href=#clúster>Clúster</a><ol><li><a href=#ventajas>Ventajas</a></li><li><a href=#qué-necesita-para-servir>Qué necesita para servir</a></li></ol></li></ol></nav></details></aside><p>Mantenimiento de copias de la información en múltiples computadores</p><ul><li><p>Es un recurso utilizado ampliamente en sistemas distribuidos</p></li><li><p>Servidores web: servidores caché y proxies</p></li><li><p>DNS: copias de los mapeos URL-IP, actualizadas diariamente</p></li><li><p>Google: Google Data Centers
Ayuda a mejorar un SD en distintos aspectos:</p></li><li><p>Rendimiento</p></li><li><p>Disponibilidad</p></li><li><p>Tolerancia a fallos</p></li><li><p>Se da principalmente a través de cachés en clientes o servidores</p></li><li><p>Mantener copias de los resultados obtenidos en llamadas anteriores al servicio reduce el coste de llamadas idénticas. Evita el tiempo de latencia del cálculo del resultado o de las consultas a otros servidores</p></li><li><p>La replicación de datos inmutables es trivial</p></li><li><p>La replicación de datos cambiantes (frecuentes en la red) conlleva un coste en protocolos de intercambio y actualización, que pueden limitar la efectividad de la réplica</p></li></ul><p><img src=/sistemas-distribuidos/Examen3/images/replica.jpg alt=Caracteristicas></p><a href=#transparencia><h2 id=transparencia><span class=hanchor arialabel=Anchor># </span>Transparencia</h2></a><p>Los clientes no son conscientes de que hay múltiples copias del recurso al que acceden para los clientes, solo existen recursos lógicos individuales</p><a href=#consistencia><h2 id=consistencia><span class=hanchor arialabel=Anchor># </span>Consistencia</h2></a><p>Las operaciones sobre un conjunto de objetos replicados deben dar resultados que sigan
la especificación de corrección definida para dichos objetos</p><a href=#objeto><h2 id=objeto><span class=hanchor arialabel=Anchor># </span>Objeto</h2></a><p>Cualquier entidad de información a replicar: Archivos, objetos Java, etc.</p><a href=#objeto-lógico><h2 id=objeto-lógico><span class=hanchor arialabel=Anchor># </span>Objeto lógico</h2></a><p>Entidad de información visible por el usuario, implementada por distintas copias físicas o réplicas. Las réplicas de un objeto lógico no tienen por qué ser todas
iguales en todo momento.</p><p>Ejemplo: algunas pueden haberse actualizado y otras no</p><ul><li>Sistema asíncrono</li><li>Los procesos fallan solo por caída</li></ul><a href=#gestor-de-réplicas><h2 id=gestor-de-réplicas><span class=hanchor arialabel=Anchor># </span>Gestor de réplicas</h2></a><p>Componentes que almacenan réplicas de un determinado objeto o servicio y operan sobre ellas.</p><a href=#frontal><h2 id=frontal><span class=hanchor arialabel=Anchor># </span>Frontal</h2></a><p>Componente que atiende las llamadas de los clientes y se comunica con los gestores de réplicas.</p><a href=#petición><h2 id=petición><span class=hanchor arialabel=Anchor># </span>Petición</h2></a><ol><li>Petición: El frontal envía la petición a un gestor o bien envía la petición a un gestor y este reenvía a otros o multidifunde la petición a varios gestores</li><li>Coordinación: los gestores se coordinan para ejecutar la petición de manera consistente</li><li>Ejecución: se ejecuta la petición (puede ser de forma tentativa)</li><li>Acuerdo: se llega a un consenso antes de consumar la ejecución</li><li>Respuesta: uno o más gestores de réplicas responden al frontal</li></ol><a href=#tolerancia-a-fallos><h2 id=tolerancia-a-fallos><span class=hanchor arialabel=Anchor># </span>Tolerancia a fallos</h2></a><ul><li>Una alta disponibilidad no implica necesariamente corrección</li><li>Puede haber datos no actualizados, o inconsistentes (concurrencia)</li><li>Podemos utilizar replicación para ganar tolerancia a fallos, parada o caída</li><li>Si tenemos n servidores, pueden fallar n-1 sin alterar el servicio</li><li>Fallo bizantino:c</li></ul><p>Deben proporcionar un servicio correcto, aunque fallen n procesos, mediante la replicación de datos y la funcionalidad asociada a los gestores de réplicas, de dos modelos principales:</p><ul><li>Replicación pasiva o primario-respaldo</li><li>Replicación activa</li></ul><a href=#replicación-pasiva><h3 id=replicación-pasiva><span class=hanchor arialabel=Anchor># </span>Replicación pasiva</h3></a><p>Un gestor de réplicas primario y uno o más gestores secundarios (‘respaldos’ o ‘esclavos’)</p><ul><li>Los frontales solo se comunican con el gestor primario</li><li>Ejecuta las operaciones y manda copias a los respaldos</li><li>Si el primario falla, uno de los respaldos promociona a primario</li></ul><a href=#fases><h4 id=fases><span class=hanchor arialabel=Anchor># </span>Fases</h4></a><ol><li>Petición: el frontal envía la petición al gestor primario</li><li>Coordinación: el gestor primario ejecuta las peticiones siguiendo una ordenación FIFO</li><li>Ejecución: se ejecuta la petición y se almacena la respuesta</li><li>Acuerdo: si es una petición de actualización, el gestor primario envía la actualización a todos los respaldos, que confirman la recepción</li><li>Respuesta: el gestor primario responde al frontal</li></ol><a href=#análisis><h4 id=análisis><span class=hanchor arialabel=Anchor># </span>Análisis</h4></a><ul><li>Tolera fallos de proceso (gestor primario o respaldos)</li><li>No tolera fallos bizantinos</li><li>El frontal requiere poca funcionalidad</li><li>Al controlar el orden de modificación mediante el gestor primario, mantiene la consistencia secuencial</li><li>Problemas de cuello de botella en el gestor primario</li><li>Actualización de todos los respaldos antes de dar respuesta</li><li>Los respaldos no dan servicio directo</li></ul><a href=#replicación-activa><h3 id=replicación-activa><span class=hanchor arialabel=Anchor># </span>Replicación Activa</h3></a><p>Todos los gestores de réplicas tienen el mismo papel los frontales multidifunden las peticiones a todos los gestores, los gestores de réplicas procesan la petición de manera independiente, pero idéntica.</p><a href=#fases-1><h4 id=fases-1><span class=hanchor arialabel=Anchor># </span>Fases</h4></a><ol><li>Petición: el frontal multidifunde la petición a los gestores. Se utiliza multidifusión fiable y de ordenación total*. No envía otra petición hasta que recibe la respuesta a la actual</li><li>Coordinación: el sistema de comunicación entrega la petición a todos los gestores según una ordenación total (multidifusión)</li><li>Ejecución: cada gestor ejecuta la petición</li><li>Acuerdo: no es necesaria, debido al tipo de multidifusión</li><li>Respuesta: cada gestor manda su respuesta al frontal. El nº de respuestas que recoge el frontal depende de las asunciones de fallo y del algoritmo de multidifusión</li></ol><p><img src=/sistemas-distribuidos/Examen3/images/rdp2.png alt=Caracteristicas>
<img src=/sistemas-distribuidos/Examen3/images/rdp.png alt=Caracteristicas></p><a href=#alta-disponibilidad><h2 id=alta-disponibilidad><span class=hanchor arialabel=Anchor># </span>Alta disponibilidad</h2></a><p>La proporción de tiempo que un servicio está accesible con tiempos de respuesta razonables debe ser ~ 100%</p><ul><li>Factores de pérdida de disponibilidad</li><li>Fallos en el servidor</li><li>Si un servidor tiene una posibilidad de fallo p del 5%, tendrá disponibilidad del 95%<ul><li>Si replicamos n veces el servidor, la disponibilidad será 1-pn</li><li>Con n=2 servidores: 1 - 0.052 = 99.75%</li></ul></li><li>Particiones de red o desconexiones</li><li>Desconexión intencionada (p. ej. BitTorrent) o no intencionada (p. ej. conexión inalámbrica viajando en bus)
<img src=/sistemas-distribuidos/Examen3/images/disp.png alt=Caracteristicas></li></ul><a href=#convergencia><h3 id=convergencia><span class=hanchor arialabel=Anchor># </span>Convergencia</h3></a><p>Todas las réplicas del documento tienen que ser iguales tras aplicar todas las operaciones.</p><a href=#consistencia-1><h3 id=consistencia-1><span class=hanchor arialabel=Anchor># </span>Consistencia</h3></a><p>Las operaciones deben aplicarse en el mismo orden en todos los nodos</p><ul><li>Basándose en la relación ‘sucede antes que’</li><li>No lo garantiza TO → uso de ordenación causal</li></ul><a href=#intención><h4 id=intención><span class=hanchor arialabel=Anchor># </span>Intención</h4></a><p>El efecto de ejecutar una operación debe ser el mismo que el efecto buscado en la réplica local sobre la que se aplica inicialmente.</p><a href=#consenso-por-quorum><h2 id=consenso-por-quorum><span class=hanchor arialabel=Anchor># </span>Consenso por Quorum</h2></a><a href=#operación-de-lectura><h4 id=operación-de-lectura><span class=hanchor arialabel=Anchor># </span>Operación de lectura</h4></a><ul><li>Recuperar un quórum de lectura (cualquier conjunto de r copias)</li><li>De las r copias, seleccionar la copia con el n.º de versión más alto</li><li>Retornar el valor de dicha copia</li></ul><a href=#operación-de-escritura><h4 id=operación-de-escritura><span class=hanchor arialabel=Anchor># </span>Operación de escritura</h4></a><ul><li>Tomar un quórum de escritura (cualquier conjunto de w copias)</li><li>De las w copias, obtener el n.º de versión más alto</li><li>Incrementar el nº de versión</li><li>Escribir el nuevo valor y el nuevo n.º de versión en todas las w copias del quórum de escritura
<img src=/sistemas-distribuidos/Examen3/images/quo.webp alt=Caracteristicas></li></ul><a href=#clúster><h2 id=clúster><span class=hanchor arialabel=Anchor># </span>Clúster</h2></a><p>Este tipo de sistemas se basa en la unión de varios servidores que trabajan como si de uno únicamente se tratase. Los sistemas clúster han evolucionado mucho desde su primera aparición, ahora se pueden crear distintos tipos de clústeres, en función de lo que se necesite:</p><ul><li>Unión de Hardware</li><li>Clústeres de Software</li><li>Alto rendimiento de bases de datos</li></ul><p><img src=/sistemas-distribuidos/Examen3/images/cluster.png alt=Caracteristicas>
Estas son solo algunas de las opciones que tenemos disponibles. En resumen, cluster es un grupo de múltiples ordenadores unidos mediante una red de alta velocidad, de tal forma que el conjunto es visto como un único ordenador, más potente que los comunes de escritorio</p><ul><li>Alto rendimiento</li><li>Alta disponibilidad</li><li>Equilibrio de carga</li><li>Escalabilidad</li></ul><a href=#ventajas><h3 id=ventajas><span class=hanchor arialabel=Anchor># </span>Ventajas</h3></a><ul><li>Relación costo/performance.</li><li>Escalabilidad incremental.</li><li>Escalabilidad incremental.</li><li>Sistema “multipropósito” (no dedicado)</li></ul><a href=#desventajas><h4 id=desventajas><span class=hanchor arialabel=Anchor># </span>DESVENTAJAS</h4></a><p>Ninguna, este tipo de sistemas son los más fiables, ya que para la parada total del proceso deben de pararse todas las máquinas que componen el grupo. Es la mejor solución para crecer según las necesidades reales, porque puede añadir tantas máquinas necesite.</p><a href=#qué-necesita-para-servir><h3 id=qué-necesita-para-servir><span class=hanchor arialabel=Anchor># </span>Qué necesita para servir</h3></a><p>Por norma general, un clúster hace uso de diferentes componentes para funcionar, entre estos están:</p><ul><li>Nodos (Ordenadores o servidores)</li><li>Sistema operativo</li><li>Conexión de Red (ampliado más abajo)</li><li>Middleware (capa entre el usuario y el sistema operativo)</li><li>Protocolos de comunicación y servicio</li><li>Aplicaciones</li></ul></article><hr><div id=contact_buttons><footer><p>Made by Joel Jarro, © 2022</p><ul><li><a href=/sistemas-distribuidos>Home</a></li></ul></footer></div></div></body></html>
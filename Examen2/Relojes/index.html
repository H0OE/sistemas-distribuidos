<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Existen 2 tipos de relojes:
  Relojes F√≠sicos Aquellos que est√°n directamente relacionados con el tiempo real y la concepci√≥n que tenemos de este."><title>‚åö Relojes</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://h0oe.github.io/sistemas-distribuidos//icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><link href=https://h0oe.github.io/sistemas-distribuidos/styles.8010c0d8fb32a34f00886b05df3d230c.min.css rel=stylesheet><script src=https://h0oe.github.io/sistemas-distribuidos/js/darkmode.46b07878b7f5d9e26ad7a3c40f8a0605.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://h0oe.github.io/sistemas-distribuidos/js/popover.688c5dcb89a57776d7f1cbeaf6f7c44b.min.js></script>
<script>const BASE_URL="https://h0oe.github.io/sistemas-distribuidos/",fetchData=Promise.all([fetch("https://h0oe.github.io/sistemas-distribuidos/indices/linkIndex.2433abcd7c48fbca569cb49e3c723d9a.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://h0oe.github.io/sistemas-distribuidos/indices/contentIndex.6b24d7265e09f8af7f860589c6103ad4.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL("https://h0oe.github.io/sistemas-distribuidos/"),s=n.pathname,o=window.location.pathname,i=s==o,e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!1;drawGraph("https://h0oe.github.io/sistemas-distribuidos",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2}),initPopover("https://h0oe.github.io/sistemas-distribuidos",!0,!0)},init=(e=document)=>{renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/h0oe.github.io\/sistemas-distribuidos\/js\/router.557a499829be51f9008c6efa5b73602a.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://h0oe.github.io/sistemas-distribuidos/js/search.cf33b507388f3dfd5513a2afcda7af41.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://h0oe.github.io/sistemas-distribuidos/>ü™¥ Sistemas Distribuidos</a></h1><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>‚åö Relojes</h1><p class=meta>Last updated June 29, 2022</p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#distorsion-de-reloj>Distorsion de reloj</a></li><li><a href=#categoria-de-algoritmos>Categoria de algoritmos</a></li><li><a href=#algoritmos>Algoritmos</a><ol><li><a href=#algoritmo-de-christian>Algoritmo de Christian</a></li><li><a href=#algoritmo-de-berkeley>Algoritmo de Berkeley</a></li></ol></li><li><a href=#ntp>NTP</a><ol><li><a href=#funcionamiento>Funcionamiento</a></li><li><a href=#comparativa-v3--vs-v4>Comparativa V3 vs V4</a></li></ol></li></ol></nav></details></aside><p><img src=/sistemas-distribuidos/Examen2/images/rel.jpg alt=Caracteristicas>
Existen 2 tipos de relojes:</p><ul><li><p>Relojes F√≠sicos
Aquellos que est√°n directamente relacionados con el tiempo real y la concepci√≥n que tenemos de este.</p></li><li><p>Relojes L√≥gico
Aquellos que tienen como importancia el orden de los eventos.</p></li></ul><p>Las computadoras tienen por lo general un reloj f√≠sico de cuarzo que basa su medici√≥n de tiempo en las oscilaciones del cristal.</p><p>Las oscilaciones de los cristales pueden ser de diferentes velocidades lo que generar√≠a un sesgo de reloj, lo que quiere decir que los relojes de 2 dispositivos se encuentran desincronizados.</p><p>Para evitar que los relojes dentro de un sistema se encuentren desincronizados, es necesario implementar algoritmos o protocolos de sincronizaci√≥n.</p><a href=#distorsion-de-reloj><h2 id=distorsion-de-reloj><span class=hanchor arialabel=Anchor># </span>Distorsion de reloj</h2></a><p>La diferencia entre los valores del tiempo se llama <strong>distorsi√≥n del reloj</strong>.</p><p>Como consecuencia de esta distorsi√≥n, podr√≠an fallar los programas que esperan que
el tiempo asociado a un archivo, objeto, proceso o mcnsaje sea correcto e independiente del sitio donde haya sido generado (es decir, del reloj utilizado).
<img src=/sistemas-distribuidos/Examen2/images/dist.png alt=Caracteristicas></p><a href=#categoria-de-algoritmos><h2 id=categoria-de-algoritmos><span class=hanchor arialabel=Anchor># </span>Categoria de algoritmos</h2></a><p>Dentro de los algoritmos podemos definir 4 categor√≠as:</p><ul><li>Internos: La sincronizaci√≥n sucede dentro de la red.</li><li>Externos: Se hace la petici√≥n de la hora a un servidor externo confiable.</li><li>Pasivos: Los nodos piden la hora.</li><li>Activos: El servidor o el maestro de la hora pregunta por las horas de los dem√°s y env√≠a instrucciones.</li></ul><a href=#algoritmos><h2 id=algoritmos><span class=hanchor arialabel=Anchor># </span>Algoritmos</h2></a><a href=#algoritmo-de-christian><h3 id=algoritmo-de-christian><span class=hanchor arialabel=Anchor># </span>Algoritmo de Christian</h3></a><p>Este algoritmo propone tener un servidor externo UTC al que los nodos del sistema preguntar√°n la hora para poder sincronizar los relojes.</p><p><img src=/sistemas-distribuidos/Examen2/images/cris.png alt=Caracteristicas>
Hay que tomar ciertas consideraciones en cuenta al momento de usar este algoritmo:</p><a href=#ventajas><h4 id=ventajas><span class=hanchor arialabel=Anchor># </span>Ventajas</h4></a><ul><li>Los relojes no deben retroceder para evitar errores</li><li>La sincronizaci√≥n requiere del intercambio de mensajes, pero el tr√°nsito de estos consume tiempo.</li><li>El tiempo del receptor UTC no puede ser menor que el tiempo de la m√°quina que le solicit√≥ el tiempo.</li><li>El servidor de UTC debe procesar las solicitudes de tiempo con el concepto de interrupciones, lo cual incide en el tiempo de atenci√≥n.</li><li>El intervalo de transmisi√≥n de la solicitud y su respuesta debe ser tomado en cuenta para la sincronizaci√≥n.</li><li>El tiempo de propagaci√≥n se suma al tiempo del servidor para sincronizar al emisor cuando √©ste recibe la respuesta.</li></ul><a href=#inconvenientes><h5 id=inconvenientes><span class=hanchor arialabel=Anchor># </span>Inconvenientes</h5></a><ul><li>El problema que se presenta es la posibilidad de fallo debido a la existencia de un √∫nico servidor. Cristian sugiere m√∫ltiples servidores de tiempo sincronizados que suministren el tiempo. El cliente env√≠a un mensaje de petici√≥n a todos los servidores y toma la primera respuesta recibida.</li><li>El algoritmo no contempla problemas de malfuncionamiento o fraude por parte del servidor.</li><li>La capacidad de cada nodo para leer el valor del reloj de otro nodo puede generar errores debido al retraso en la comunicaci√≥n de mensajes entre nodos. La demora se puede calcular tomando en cuenta el tiempo necesario para preparar, transmitir y recibir un mensaje vac√≠o en ausencia de errores de transmisi√≥n y carga del sistema.</li></ul><a href=#algoritmo-de-berkeley><h3 id=algoritmo-de-berkeley><span class=hanchor arialabel=Anchor># </span>Algoritmo de Berkeley</h3></a><p>Este algoritmo se propone en situaciones en las que no se cuenta con un servidor UTC confiable. La idea es que dentro de las computadoras de una red, se selecciona una que sea maestra y las dem√°s ser√°n esclavas. Esta computadora maestra, se encargar√° de preguntarle a las dem√°s las horas que est√°n manejando, para poder sacar un promedio y mandar instrucciones para el retraso o adelanto de relojes dependiendo la situaci√≥n de cada computadora.</p><p><img src=/sistemas-distribuidos/Examen2/images/berk.jpg alt=Caracteristicas></p><p>En este algoritmo no es importante tener en cuenta el delay entre el env√≠o y respuesta del mensaje debido a que solo necesitamos hallar un promedio para la sincronizaci√≥n, m√°s no la hora exacta. En caso de que el maestro muera, se busca uno nuevo, y si un nodo falla, simplemente no se toma en cuenta.</p><a href=#inconvenientes-1><h5 id=inconvenientes-1><span class=hanchor arialabel=Anchor># </span>Inconvenientes</h5></a><ul><li>En caso de que el maestro falle, dejar√° de preguntar la hora y, en consecuencia, se perder√° la sincronizaci√≥n.</li><li>En el paso de mensajes entre maestro y esclavos y viceversa se ha de tener en cuenta el retraso que genera el propio env√≠o de los mensajes, por lo que tendremos errores a la hora de sincronizar.</li><li>Otro de los problemas de ser un algoritmo centralizado ser√° el de tener que elegir un nuevo maestro debido a que se puedan producir fallos en el tratamiento de los datos para llevar a cabo la sincronizaci√≥n, buscando un maestro que cometa menor cantidad de fallos y el sistema se mantenga en correcto funcionamiento.</li><li>La demora introducida por los equipos de conmutaci√≥n, se agrava en los casos en los que el equipo cumple otras funciones, adem√°s de conmutar paquetes, como es el caso de un PC que, adem√°s de actuar como conmutador, atiende otras tareas, con lo cual, la misma tarea de conmutar puede insumir diferentes tiempos.</li></ul><a href=#ntp><h2 id=ntp><span class=hanchor arialabel=Anchor># </span>NTP</h2></a><p>Finalmente nos encontramos con el protocolo NTP para la sincronizaci√≥n de relojes mediante internet. Este protocolo funciona en la capa 4 de red, <strong>con el protocolo UDP y en el puerto 123.</strong></p><p><img src=/sistemas-distribuidos/Examen2/images/ntp.png alt=Caracteristicas></p><a href=#funcionamiento><h3 id=funcionamiento><span class=hanchor arialabel=Anchor># </span>Funcionamiento</h3></a><p>El cliente NTP inicia un intercambio de solicitud de tiempo con el servidor NTP. Luego, el cliente puede calcular el retraso del enlace y su compensaci√≥n local y ajustar su reloj local para que coincida con el reloj de la computadora del servidor.
<img src=/sistemas-distribuidos/Examen2/images/ntp-3.jpg alt=Caracteristicas>
<strong>La versi√≥n actual es la NTP v4</strong></p><p>Como regla general, se requieren seis intercambios durante un per√≠odo de aproximadamente cinco a 10 minutos para configurar inicialmente el reloj.</p><p>Una vez sincronizado, el cliente actualiza el reloj aproximadamente una vez cada 10 minutos, lo que generalmente requiere solo un √∫nico intercambio de mensajes, adem√°s de la sincronizaci√≥n cliente-servidor. Esta transacci√≥n ocurre a trav√©s del Protocolo de datagramas de usuario (UDP) en el <strong>puerto 123</strong> NTP tambi√©n admite la sincronizaci√≥n de transmisi√≥n de los relojes de la computadora del mismo nivel.</p><p>Hay miles de servidores NTP en todo el mundo. Tienen acceso a relojes at√≥micos de alta precisi√≥n y relojes del Sistema de Posicionamiento Global. Se requieren receptores especializados para comunicarse directamente con los servidores NTP para estos servicios de tiempo.</p><p>No es pr√°ctico ni rentable equipar cada computadora con uno de estos receptores. En cambio, las computadoras designadas como servidores de tiempo principales est√°n equipadas con los receptores. Utilizan protocolos como NTP para sincronizar las horas de reloj de las computadoras en red.</p><p>NTP emplea el tiempo universal coordinado (UTC) para sincronizar las horas del reloj de la computadora con extrema precisi√≥n. Ofrece una mayor precisi√≥n en redes m√°s peque√±as, hasta 1 milisegundo en una red de √°rea local (LAN) y dentro de decenas de milisegundos en Internet. NTP no tiene en cuenta las zonas horarias. En cambio, depende del host para realizar tales c√°lculos.</p><p>Los grados de separaci√≥n de la fuente UTC se definen como estratos. Los diversos estratos incluyen lo siguiente:</p><ul><li>Estrato 0. Un reloj de referencia recibe la hora real de un transmisor dedicado o un sistema de navegaci√≥n por sat√©lite. Se clasifica como estrato 0.</li><li>Estrato 1. Un dispositivo est√° directamente vinculado al reloj de referencia.</li><li>Estrato 2. Un dispositivo recibe su tiempo de una computadora de estrato 1.</li><li>Estrato 3. Un dispositivo recibe su tiempo de una computadora de estrato 2.</li></ul><p>La clasificaci√≥n de estrato contin√∫a a partir de ah√≠. La precisi√≥n se reduce con cada grado adicional de separaci√≥n.</p><a href=#comparativa-v3--vs-v4><h3 id=comparativa-v3--vs-v4><span class=hanchor arialabel=Anchor># </span>Comparativa V3 vs V4</h3></a><ul><li>NTPv4 direccionamiento IPv4 e IPv6 cliente ‚Äì servidor</li><li>Incorporar seguridad en las comunicaciones NTPv4 -<ul><li>criptograf√≠a, clave publica y privada</li></ul></li><li>Mejora la Compatibilidad con DNS, almacena el nombre del host y la IP, a diferencia de la v3 que le nombre del host no era almacenado</li></ul></article><hr><div id=contact_buttons><footer><p>Made by Joel Jarro, ¬© 2022</p><ul><li><a href=/sistemas-distribuidos>Home</a></li></ul></footer></div></div></body></html>